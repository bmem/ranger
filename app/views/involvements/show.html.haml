%h1= "#{@involvement.name} involvement in #{@involvement.event}"

%p
  %b Name:
  = @involvement.name

%p
  %b Full name:
  = @involvement.full_name

%p
  %b Barcode:
  = @involvement.barcode

%p
  %b On site:
  = @involvement.on_site

%p
  %b Involvement status:
  = @involvement.involvement_status

%p
  %b Personnel status:
  = @involvement.personnel_status

%h3 On site details
%dl.attributes[@involvement]
  - Involvement::DETAIL_ATTRS.each do |attr|
    %dt{:id => "label_#{attr}"}<= Involvement.human_attribute_name attr
    %dd{:id => "value_#{attr}"}<= @involvement.send attr

%a{:name => 'worklogs'}
%h3 Work logs
%table.worklogs[@involvement]
  %tr
    %th Position
    %th Shift
    %th Start time
    %th End time
    %th Hours
    %th Credits
    %th Note
  - @involvement.work_logs.order(:start_time).each do |w|
    %tr
      %td= link_to w.position, event_work_log_path(@event, w)
      %td= w.shift
      %td= l w.start_time
      %td= l w.end_time
      %td= w.hours_formatted
      %td= w.credit_value_formatted
      %td= w.note
  %tr
    %td(colspan=4)
      %b Total
    %td
      %b= @involvement.total_hours_formatted
    %td
      %b= format('%.2f', @involvement.total_credits)
    %td

%p
  %b Positions:
  = @involvement.positions.to_sentence

%p
  %b More details about this person:
  = link_to_record @involvement.person

= link_to 'Edit', edit_event_involvement_path(@event, @involvement)
\|
= link_to 'Back', event_involvements_path(@event)
